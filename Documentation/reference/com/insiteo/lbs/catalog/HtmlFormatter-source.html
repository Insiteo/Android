<!DOCTYPE html>

















































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="description" content="Javadoc API documentation for Insiteo API Documentation - Version 3.2.0_RC4." />

<link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico" />
<title>

  HtmlFormatter


| Insiteo API Documentation - Version 3.2.0_RC4

</title>
<link href="../../../../../assets/doclava-developer-docs.css" rel="stylesheet" type="text/css" />
<link href="../../../../../assets/customizations.css" rel="stylesheet" type="text/css" />
<script src="../../../../../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="../../../../../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="../../../../../assets/doclava-developer-docs.js" type="text/javascript"></script>
<script src="../../../../../assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("../../../../", "../../../../../assets/");
</script>
<script src="../../../../../assets/doclava-developer-reference.js" type="text/javascript"></script>
<script src="../../../../../assets/navtree_data.js" type="text/javascript"></script>
<script src="../../../../../assets/customizations.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
</head>

<body class="">

<div id="header">
    <div id="headerLeft">
    
      <span id="masthead-title">Insiteo API Documentation - Version 3.2.0_RC4</span>
    
    </div>
    <div id="headerRight">
      
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, '../../../../')"
                      onkeyup="return search_changed(event, false, '../../../../')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      
        
  <div id="api-level-toggle">
    <input type="checkbox" id="apiLevelCheckbox" onclick="toggleApiLevelSelector(this)" />
    <label for="apiLevelCheckbox" class="disabled">Filter by API Level: </label>
    <select id="apiLevelSelector">
      <!-- option elements added by buildApiLevelSelector() -->
    </select>
  </div>
  <script>
   var SINCE_DATA = [ 'v1', 'v1' ];
    
    var SINCE_LABELS = [ 'v1', 'v1' ];
    buildApiLevelSelector();
    addLoadEvent(changeApiLevel);
  </script>


      
    </div>
</div><!-- header -->


  <div class="g-section g-tpl-240" id="body-content">
    <div class="g-unit g-first side-nav-resizable" id="side-nav">
      <div id="swapper">
        <div id="nav-panels">
          <div id="resize-packages-nav">
            <div id="packages-nav">
              <div id="index-links">
                <a href="../../../../packages.html"  >Package Index</a> | 
                <a href="../../../../classes.html" >Class Index</a>
              </div>
              <ul>
                
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/analytics/package-summary.html">com.insiteo.lbs.analytics</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/analytics/entities/package-summary.html">com.insiteo.lbs.analytics.entities</a></li>
    <li class="selected api apilevel-">
  <a href="../../../../com/insiteo/lbs/catalog/package-summary.html">com.insiteo.lbs.catalog</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/catalog/database/package-summary.html">com.insiteo.lbs.catalog.database</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/catalog/entities/package-summary.html">com.insiteo.lbs.catalog.entities</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/catalog/render/package-summary.html">com.insiteo.lbs.catalog.render</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/common/package-summary.html">com.insiteo.lbs.common</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/common/auth/package-summary.html">com.insiteo.lbs.common.auth</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/common/auth/entities/package-summary.html">com.insiteo.lbs.common.auth.entities</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/common/init/package-summary.html">com.insiteo.lbs.common.init</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/geofence/package-summary.html">com.insiteo.lbs.geofence</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/geofence/render/package-summary.html">com.insiteo.lbs.geofence.render</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/itinerary/package-summary.html">com.insiteo.lbs.itinerary</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/itinerary/entities/package-summary.html">com.insiteo.lbs.itinerary.entities</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/location/package-summary.html">com.insiteo.lbs.location</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/location/utils/package-summary.html">com.insiteo.lbs.location.utils</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/map/package-summary.html">com.insiteo.lbs.map</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/map/database/package-summary.html">com.insiteo.lbs.map.database</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/map/entities/package-summary.html">com.insiteo.lbs.map.entities</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/map/gestures/package-summary.html">com.insiteo.lbs.map.gestures</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/map/render/package-summary.html">com.insiteo.lbs.map.render</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/map/utils/package-summary.html">com.insiteo.lbs.map.utils</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/meetme/package-summary.html">com.insiteo.lbs.meetme</a></li>
    <li class="api apilevel-">
  <a href="../../../../com/insiteo/lbs/meetme/requests/package-summary.html">com.insiteo.lbs.meetme.requests</a></li>
              </ul><br/>
            </div> <!-- end packages -->
          </div> <!-- end resize-packages -->
          <div id="classes-nav">
            <ul>
              
    <li><h2>Interfaces</h2>
      <ul>
          <li class="api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/ICatalogListener.html">ICatalogListener</a></li>
      </ul>
    </li>
              
    <li><h2>Classes</h2>
      <ul>
          <li class="api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/AudioPlayer.html">AudioPlayer</a></li>
          <li class="api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/CatalogConstants.html">CatalogConstants</a></li>
          <li class="api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/CatalogProvider.html">CatalogProvider</a></li>
          <li class="api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/CatalogWebView.html">CatalogWebView</a></li>
          <li class="selected api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/HtmlFormatter.html">HtmlFormatter</a></li>
      </ul>
    </li>
              
              
    <li><h2>Enums</h2>
      <ul>
          <li class="api apilevel-"><a href="../../../../com/insiteo/lbs/catalog/CatalogEventType.html">CatalogEventType</a></li>
      </ul>
    </li>
              
              
            </ul><br/>
          </div><!-- end classes -->
        </div><!-- end nav-panels -->
        <div id="nav-tree" style="display:none">
          <div id="index-links">
            <a href="../../../../packages.html"  >Package Index</a> | 
            <a href="../../../../classes.html" >Class Index</a>
          </div>
        </div><!-- end nav-tree -->
      </div><!-- end swapper -->
    </div> <!-- end side-nav -->
    <script>
      if (!isMobile) {
        $("<a href='#' id='nav-swap' onclick='swapNav();return false;' style='font-size:10px;line-height:9px;margin-left:1em;text-decoration:none;'><span id='tree-link'>Use Tree Navigation</span><span id='panel-link' style='display:none'>Use Panel Navigation</span></a>").appendTo("#side-nav");
        chooseDefaultNav();
        if ($("#nav-tree").is(':visible')) {
          init_default_navtree("../../../../");
        } else {
          addLoadEvent(function() {
            scrollIntoView("packages-nav");
            scrollIntoView("classes-nav");
          });
        }
        $("#swapper").css({borderBottom:"2px solid #aaa"});
      } else {
        swapNav(); // tree view should be used on mobile
      }
    </script>



<div class="g-unit" id="doc-content">

<div id="api-info-block">



  
   
  
  
  
  


<div class="sum-details-links">

<div>
<a href="HtmlFormatter.html">View Documentation</a>
</div>


</div><!-- end sum-details-links -->
<div class="api-level">
  

  Since: <a href="../../../../guide/appendix/api-levels.html#level">API Level </a>


  
  

</div>
</div><!-- end api-info-block -->


<!-- ======== START OF CLASS DATA ======== -->

<div id="jd-header">
    public
     
     
    
    class
<h1>HtmlFormatter</h1>



  
    extends <a href="http://d.android.com/reference/java/lang/Object.html">Object</a><br/>
  
  
  

  
  
  


</div><!-- end header -->
<div id="jd-content">
  <pre class="prettyprint">
package com.insiteo.lbs.catalog;

import java.io.File;

import android.content.res.Resources;

import com.insiteo.lbs.R;
import com.insiteo.lbs.catalog.entities.CatalogEntry;
import com.insiteo.lbs.catalog.entities.Category;
import com.insiteo.lbs.catalog.entities.Media;
import com.insiteo.lbs.catalog.entities.Poi;
import com.insiteo.lbs.common.init.EPackageType;
import com.insiteo.lbs.common.init.InitProvider;
import com.insiteo.lbs.common.utils.FileUtils;

public class HtmlFormatter {

	protected static final String BACK_LINK = "$_BACK_LINK";
	protected static final String BACK_NAME = "$_BACK_NAME";
	protected static final String BACK_LINK_HIDE = "$_HIDE_BACKLINK";

	protected static final String CATEGORY_NAME = "$_CATEGORY_NAME";
	protected static final String CATEGORY_LIST = "$_CATEGORY_LIST";

	protected static final String ENTRY_NAME = "$_ENTRY_NAME";
	protected static final String ENTRY_ID = "$_ENTRY_ID";
	protected static final String ENTRY_SUBTITLE = "$_ENTRY_SUBTITLE";
	protected static final String ENTRY_IMAGE_URL = "$_ENTRY_IMAGE_URL";
	protected static final String ENTRY_LINK = "$_ENTRY_LINK";
	protected static final String ENTRY_TYPE = "$_ENTRY_TYPE";

	protected static final String POI_ID = "$_POI_ID";
	protected static final String POI_NAME = "$_POI_NAME";
	protected static final String POI_DESCRIPTION = "$_POI_DESCRIPTION";
	protected static final String POI_LABEL = "$_POI_LABEL";
	protected static final String POI_SOCIAL = "$_POI_SOCIAL";
	protected static final String POI_SOCIETY = "$_POI_SOCIETY";
	protected static final String POI_ADDRESS = "$_POI_ADDRESS";
	protected static final String POI_LOCATION = "$_POI_LOCATION";
	protected static final String POI_SUBTITLE = "$_POI_SUBTITLE";
	protected static final String POI_KEYWORDS = "$_POI_KEYWORDS";
	protected static final String POI_PHONE = "$_POI_PHONE";
	protected static final String POI_INTERNET = "$_POI_INTERNET";
	protected static final String POI_MAIL = "$_POI_MAIL";
	protected static final String POI_NUMBER = "$_POI_NUMBER";
	protected static final String POI_IMAGE_URL = "$_POI_IMAGE_URL";
//	protected static final String POI_BEGIN_DATE = "$_POI_BEGIN_DATE";
//	protected static final String POI_END_DATE = "$_POI_BEGIN_DATE";
	protected static final String POI_EXTRA_1 = "$_POI_EXTRA_1";
	protected static final String POI_EXTRA_2 = "$_POI_EXTRA_2";
	protected static final String POI_TIME = "$_POI_TIME";

	protected static final String POI_FAVORITE = "$_POI_FAVORITE";
	protected static final String POI_FAVORITE_IMAGE = "$_POI_FAVORITE_IMAGE";
	
	protected static final String MEDIA_ACTION = "$_MEDIA_ACTION";
	protected static final String MEDIA_TYPE = "$_MEDIA_TYPE";
	protected static final String MEDIA_NAME = "$_MEDIA_NAME";
	protected static final String MEDIA_ACTION_IMAGE = "$_MEDIA_ACTION_IMAGE";
	protected static final String POI_MEDIA_LIST = "$_POI_MEDIA_LIST";
	protected static final String MEDIA_LIST = "$_MEDIA_LIST";
	protected static final String POI_MEDIA_DIV = "$_POI_MEDIA_DIV";

	/*package*/ static final String CATALOG_CATEGORY_LINK = "category_";
	/*package*/ static final String CATALOG_POI_LINK = "poi_";
	/*package*/ static final String CATALOG_SPONSOR_LINK = "sponsor_";
	/*package*/ static final String CATALOG_ADD_FAVORITES_LINK = "add_favorites_";
	/*package*/ static final String CATALOG_REMOVE_FAVORITES_LINK = "remove_favorites_";
	/*package*/ static final String CATALOG_BACK_LINK = "go_back";
	/*package*/ static final String CATALOG_PLAY_MP3_LINK = "playmp3_";
	/*package*/ static final String CATALOG_POI_LOCATE_LINK = "locate_";
	/*package*/ static final String CATALOG_POI_ITINERARY_TO_LINK = "itinerary_to_";
	/*package*/ static final String CATALOG_POI_ITINERARY_FROM_LINK = "itinerary_from_";
	/*package*/ static final String CATALOG_SEARCH_LINK = "search_";
	/*package*/ static final String CATALOG_FAVORITES_LINK = "favorites";	
	/*package*/ static final String CATALOG_STYLE_HIDDEN = "_hidden";	
	/*package*/ static final String CATALOG_STYLE_VISIBLE = "";	
	/*package*/ static final String CATALOG_CUSTOM_LINK = "custom_";

	protected static final String MEDIA_LIST_VISIBLE = "media_list_visible";
	protected static final String MEDIA_LIST_HIDDEN = "media_list_hidden";
	protected static final String MEDIA_IMAGE_AUDIO = "play.png"; 
	
	private String mLRRTemplatePath = "";
	private String mHRRTemplatePath = "";
		
	private String mBackLinkText = "";
	private String mNoEntryText = "";
	private String mNoFavoriteText = "";
	private String mMediaText = "";
	
	
	/**
	 * Constructor.
	 * @param aResources context resources 
	 */
	public HtmlFormatter(Resources aResources) {
		mBackLinkText = aResources.getString(R.string.insiteo_catal_backlink);
		mNoEntryText = aResources.getString(R.string.insiteo_catal_no_entry);
		mNoFavoriteText = aResources.getString(R.string.insiteo_catal_no_favorite);
		mMediaText = aResources.getString(R.string.insiteo_catal_medias);
		
		mLRRTemplatePath = InitProvider.getInstance().getDataDirPath() + "/" + EPackageType.CONTENTLRR.getDirName() + "/" + CatalogConstants.TEMPLATE_PATH_LRR;
		mHRRTemplatePath = InitProvider.getInstance().getDataDirPath() + "/" + EPackageType.CONTENTHRR.getDirName() + "/" + CatalogConstants.TEMPLATE_PATH_HRR;
	}
	
	public String getCatalogBaseUrl(boolean isHRR) {
		return "file://" + (isHRR ? mHRRTemplatePath : mLRRTemplatePath) + "/" + CatalogConstants.HTML_PAGES_PATH;
	}
	
	//generate the html for the "go back" header
	private String generateBackContent(String sourceString, boolean isVisible) {
		sourceString = sourceString.replace(BACK_LINK_HIDE, (isVisible ? CATALOG_STYLE_VISIBLE : CATALOG_STYLE_HIDDEN));
		sourceString = sourceString.replace(BACK_LINK, CATALOG_BACK_LINK);
		sourceString = sourceString.replace(BACK_NAME, mBackLinkText);
		return sourceString;
	}
	
	//generate the html for a POI page
	public String generatePoiHTMLPage(Poi poi, boolean isFavorite, boolean hasHistory) {
		return generatePoiHTMLPage(poi, isFavorite, hasHistory, null, null);
	}
	
	public String generatePoiHTMLPage(Poi poi, boolean isFavorite, boolean hasHistory, String poiHTMLTemplate, String mediaElemHTMLTemplate) {
		if (poiHTMLTemplate == null) {
			String templatePath = poi.isHRR() ? mHRRTemplatePath : mLRRTemplatePath;
			templatePath += "/" + CatalogConstants.POI_TEMPLATE_PATH;
			File template = new File(templatePath);
			poiHTMLTemplate = FileUtils.readTextFile(template);
		} 
		if (mediaElemHTMLTemplate == null) {
			String templatePath = poi.isHRR() ? mHRRTemplatePath : mLRRTemplatePath;
			templatePath += "/" + CatalogConstants.MEDIA_ELEM_TEMPLATE_PATH;
			File template = new File(templatePath);
			mediaElemHTMLTemplate = FileUtils.readTextFile(template);
		}
	    if (poiHTMLTemplate.length() &gt; 0 &amp;&amp; poi != null) {
	        poiHTMLTemplate = generateBackContent(poiHTMLTemplate, hasHistory);
	        poiHTMLTemplate = poiHTMLTemplate.replace(ENTRY_NAME, poi.getName());
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_ID, ""+poi.getId());
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_NAME, poi.getName());
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_SUBTITLE, poi.getSubtitle());
	        
	        
	        String imgUrl = "";
	    	if (poi.hasImageUrl()) {
	    		imgUrl = poi.getImageUrl();
	    	}
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_IMAGE_URL, imgUrl);
	        
	        String tmpStr = poi.getDescription();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_DESCRIPTION, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getLabel();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_LABEL, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getSocial();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_SOCIAL, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getSociety();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_SOCIETY, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getAddress();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_ADDRESS, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getLocation();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_LOCATION, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getKeywords();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_KEYWORDS, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getPhoneNumber();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_PHONE, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getWebsiteUrl();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_INTERNET, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getMailAddress();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_MAIL, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getNumber();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_NUMBER, (tmpStr == null ? "" : tmpStr));

	        tmpStr = poi.getTime();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_TIME, (tmpStr == null ? "" : tmpStr));
	        
	        // TODO create an HTML formatter for dates (ie. $_POI_BEGIN_DAY, etc)
//	        long tmpl = poi.getBeginDate();
//	        Date date = new Date(tmpl);
//	        tmpStr = "" + DateFormat.format("yyyy-MM-dd", date);
//	        poiHTML = poiHTML.replace(POI_BEGIN_DATE, (tmpStr == null ? "" : tmpStr));
//	        tmpl = poi.getEndDate();
//	        date = new Date(tmpl);
//	        tmpStr = "" + DateFormat.format("yyyy-MM-dd", date);
//	        poiHTML = poiHTML.replace(POI_END_DATE, (tmpStr == null ? "" : tmpStr));
	        
	        tmpStr = poi.getExtra1();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_EXTRA_1, (tmpStr == null ? "" : tmpStr));
	        tmpStr = poi.getExtra2();
	        poiHTMLTemplate = poiHTMLTemplate.replace(POI_EXTRA_2, (tmpStr == null ? "" : tmpStr));
	        	        
	        if (isFavorite) {
	        	poiHTMLTemplate = poiHTMLTemplate.replace(POI_FAVORITE_IMAGE, CatalogConstants.IMAGE_FAVORITES_ON);
	        	poiHTMLTemplate = poiHTMLTemplate.replace(POI_FAVORITE, CATALOG_REMOVE_FAVORITES_LINK + poi.getId());
	        }
	        else {
	        	poiHTMLTemplate = poiHTMLTemplate.replace(POI_FAVORITE_IMAGE, CatalogConstants.IMAGE_FAVORITES_OFF);
	        	poiHTMLTemplate = poiHTMLTemplate.replace(POI_FAVORITE, CATALOG_ADD_FAVORITES_LINK + poi.getId());
	        }
	        
	        //Media
	        poiHTMLTemplate = poiHTMLTemplate.replace(MEDIA_LIST, mMediaText);
            if (poi.getMedias().size() &gt; 0) {
            	poiHTMLTemplate = poiHTMLTemplate.replace(POI_MEDIA_DIV, MEDIA_LIST_VISIBLE);
            	
		        String mediasString = "";
	            for (Media media : poi.getMedias()) {
	                mediasString += generateMedia(media, mediaElemHTMLTemplate);
	            }
	            poiHTMLTemplate = poiHTMLTemplate.replace(POI_MEDIA_LIST, mediasString);
            }
            else {
            	//no media =&gt; hide media div
            	poiHTMLTemplate = poiHTMLTemplate.replace(POI_MEDIA_DIV, MEDIA_LIST_HIDDEN);
            	poiHTMLTemplate = poiHTMLTemplate.replace(POI_MEDIA_LIST, "");
            }            
	    }
	    
	    return poiHTMLTemplate;
	}

	
	public String generateCategoryHTMLPage(Category aCategory, boolean hasHistory) {
		return generateCategoryHTMLPage(aCategory, hasHistory, false, null, null);
	}
	
	public String generateCategoryHTMLPage(Category aCategory, boolean hasHistory, boolean isFavorite, String categHTMLTemplate, String categElemHTMLTemplate) {
		if (categHTMLTemplate == null) {
			String templatePath = aCategory.isHRR() ? mHRRTemplatePath : mLRRTemplatePath;
			templatePath += "/" + CatalogConstants.CATEGORY_TEMPLATE_PATH;
			File template = new File(templatePath);
			categHTMLTemplate = FileUtils.readTextFile(template);
		}
		if (categElemHTMLTemplate == null) {
			String templatePath = aCategory.isHRR() ? mHRRTemplatePath : mLRRTemplatePath;
			templatePath += "/" + CatalogConstants.CATEGORY_ELEM_TEMPLATE_PATH;
			File template = new File(templatePath);
			categElemHTMLTemplate = FileUtils.readTextFile(template);
		}
		
	    if (categHTMLTemplate != null &amp;&amp; categHTMLTemplate.length() &gt; 0 &amp;&amp; aCategory != null) {
	    	categHTMLTemplate = generateBackContent(categHTMLTemplate, hasHistory);
	        categHTMLTemplate = categHTMLTemplate.replace(CATEGORY_NAME, aCategory.getName());
	        categHTMLTemplate = categHTMLTemplate.replace(ENTRY_NAME, aCategory.getName());
	        
	        String strEntries = "";
	        if (aCategory.getSubEntries().size() &gt; 0) {
	            for (CatalogEntry entry : aCategory.getSubEntries()) {
	                String strEntry = generateCatalogueEntry(entry, categElemHTMLTemplate);
	                strEntries += strEntry;
	            }
	        } 
	        else {
	            strEntries = isFavorite ? mNoFavoriteText : mNoEntryText;
	        }
	        
	        categHTMLTemplate = categHTMLTemplate.replace(CATEGORY_LIST, strEntries);
	    }
	        
	    return categHTMLTemplate;
	}
	
	
	//generate the html for a catalog entry (ie : an element in a list)
	private String generateCatalogueEntry(CatalogEntry aEntry, String categElemHTMLTemplate) {
		if (categElemHTMLTemplate.length() &gt; 0 &amp;&amp; aEntry != null) {        
	    	categElemHTMLTemplate = categElemHTMLTemplate.replace(ENTRY_NAME, aEntry.getName());
	    	categElemHTMLTemplate = categElemHTMLTemplate.replace(ENTRY_ID, "" + aEntry.getId());
	    	categElemHTMLTemplate = categElemHTMLTemplate.replace(ENTRY_SUBTITLE, aEntry.getSubtitle());
	    	String imgUrl = "";
	    	if (aEntry.hasImageUrl()) {
	    		imgUrl = aEntry.getImageUrl();
	    	}
	    	categElemHTMLTemplate = categElemHTMLTemplate.replace(ENTRY_IMAGE_URL, imgUrl);
	        	        
	        String entryLink = "";
	        String entryType = "";
	        switch (aEntry.getType()) {
	            case CATEGORY :
	                entryLink = CATALOG_CATEGORY_LINK + aEntry.getId();
	                entryType = aEntry.getType().toString();
	                break;
	            case POI :
	            	entryLink = CATALOG_POI_LINK + aEntry.getId();
	                entryType = aEntry.getType().toString();
	                break;
	            case SPONSOR :
	            	entryLink = CATALOG_SPONSOR_LINK + aEntry.getId();
	                entryType = aEntry.getType().toString();
	                break;
	            default:
	                break;
	        }
	        categElemHTMLTemplate = categElemHTMLTemplate.replace(ENTRY_LINK, entryLink);
	        categElemHTMLTemplate = categElemHTMLTemplate.replace(ENTRY_TYPE, entryType);
	    }
	    
	    return categElemHTMLTemplate;
	}
	
	//generate the html for a pois media
	private String generateMedia(Media aMedia, String mediaElemHTMLTemplate) {
	    if (mediaElemHTMLTemplate != null &amp;&amp; mediaElemHTMLTemplate.length() &gt; 0) {
	    	mediaElemHTMLTemplate = mediaElemHTMLTemplate.replace(MEDIA_NAME, aMedia.getLabel());
		    
		    if (aMedia != null) {        
		    	String imageName = "";
		    	String mediaType = "";
		    	String mediaAction = "";
		        
		        switch (aMedia.getType()) {
		            case AUDIO :
		                imageName = MEDIA_IMAGE_AUDIO;
		                mediaAction = CATALOG_PLAY_MP3_LINK + aMedia.getFilename();
		                break;
		            case VIDEO :
		                break;
		            case IMAGE :
		                break;
		            case HTML :
		                break;
		        }
		    	
		        mediaElemHTMLTemplate = mediaElemHTMLTemplate.replace(MEDIA_ACTION_IMAGE, imageName);
		        mediaElemHTMLTemplate = mediaElemHTMLTemplate.replace(MEDIA_TYPE, mediaType);
		        mediaElemHTMLTemplate = mediaElemHTMLTemplate.replace(MEDIA_ACTION, mediaAction);
		    }
	    }
	    
	    return mediaElemHTMLTemplate;
	}
}

  </pre>
</div>
<div id="footer">
Generated by <a href="http://code.google.com/p/doclava/">Doclava</a>.
</div> <!-- end footer -->

</div> <!-- jd-content -->

</div><!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize doclava-developer-docs.js */
</script>

</body>
</html>
